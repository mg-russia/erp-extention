
Процедура ОтобратьПоНоменклатуреСервер(ЗначВыбора)
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	_ГарантийныйЗапросТовары.Ссылка
	|ИЗ
	|	Документ._ГарантийныйЗапрос.Товары КАК _ГарантийныйЗапросТовары
	|ГДЕ
	|	_ГарантийныйЗапросТовары.Номенклатура.Код = &НоменклатураКод";
	
	Запрос.УстановитьПараметр("НоменклатураКод", ЗначВыбора);
	
	СписокСсылок = Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Ссылка");
	
	ТекОтбор = Неопределено;
	Для Каждого Элем Из Список.Отбор.Элементы Цикл 
		Если Элем.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Ссылка") Тогда 
			ТекОтбор = Элем;	
		КонецЕсли;
	КонецЦикла;
	
	Если ТекОтбор = Неопределено Тогда 
		ТекОтбор = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		ТекОтбор.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Ссылка");
	КонецЕсли;
	
	ТекОтбор.Использование  = Истина;
	ТекОтбор.ВидСравнения   = ВидСравненияКомпоновкиДанных.ВСписке;
	ТекОтбор.ПравоеЗначение = СписокСсылок;
	
КонецПроцедуры

&НаКлиенте
Процедура ОтобратьПоНоменклатуре(Команда)
	
	Мас = Новый Массив;
	Мас.Добавить(Тип("Строка"));
	ОписаниеТипов = Новый ОписаниеТипов(Мас);
	ЗначВыбора = Неопределено;
	ВвестиЗначение(ЗначВыбора, "Введите код, по которому хотите отобрать список", ОписаниеТипов);
	Если Не ЗначВыбора = Неопределено Тогда 
		ОтобратьПоНоменклатуреСервер(ЗначВыбора);
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ОтключитьОтбор(Команда)
	
	Для Каждого Элем Из Список.Отбор.Элементы Цикл 
		Если Элем.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Ссылка") Тогда 
			Элем.Использование = Ложь;	
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры
