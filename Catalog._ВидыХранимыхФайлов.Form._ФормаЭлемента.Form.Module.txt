
&НаСервере
Функция   ПодготовитьСписокВыбораСервер()
	
	СписокВыбора  = Новый СписокЗначений;
	
	Для Каждого Спр Из Метаданные.Справочники Цикл 
		СписокВыбора.Добавить("Справочник." + Спр.Имя, Спр.Синоним,,БиблиотекаКартинок.Справочник);	
	КонецЦикла;
	
	Для Каждого Док Из Метаданные.Документы Цикл 
		СписокВыбора.Добавить("Документ." + Док.Имя, Док.Синоним,,БиблиотекаКартинок.Документ);	
	КонецЦикла;
	
	Возврат СписокВыбора;
	
КонецФункции

&НаКлиенте
Процедура МетаданныеНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СписокВыбора  = ПодготовитьСписокВыбораСервер();
	
	Выб = СписокВыбора.ВыбратьЭлемент();
	Если Не Выб = Неопределено Тогда 
		Объект.Метаданные = Выб.Значение;
		ТипДанныхОбъекта = СтрЗаменить(Объект.Метаданные, "Справочник.", "");
		ТипДанныхОбъекта = СтрЗаменить(Объект.Метаданные, "Документ.", "");
		Объект.ТипДанныхОбъекта = ТипДанныхОбъекта;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПерейтиКПравиламРегистрации(Команда)
	
	ОткрытьФорму("РегистрСведений._ПРОДляЭлектронногоАрхива.Форма._УпрДопФормаСписка", Новый Структура("ВидФайла", Объект.Ссылка));
	
КонецПроцедуры
